<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/png" href="../favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="../favicon/favicon.svg" />
    <link rel="shortcut icon" href="../favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-touch-icon.png" />
    <link rel="manifest" href="../favicon/site.webmanifest" />
    <title>Maintenance Bosconnect</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <link rel="stylesheet" href="maintenance.css">
    <script src="maintenance.js" defer></script>
</head>

<body>
    <header>
        <div class="header-container">
            <div class="connexion">BOSCONNECT</div>
        </div>
    </header>

    <div class="content-wrapper">
        <form id="interventionForm" class="main-container">

            <div id="step1" class="section  visible">
                <h2>Informations</h2>
                <div class="form-group">
                    <label for="interventionName">Nom intervenant:</label>
                    <input type="text" id="interventionName" name="interventionName" required>
                </div>
                <div class="form-group">
                    <label for="interventionNumber">N° d'intervention:</label>
                    <input type="text" id="interventionNumber" name="interventionNumber" required>
                </div>
                <div class="form-group">
                    <label for="bosconnectNumber">N° de carte Bosconnect:</label>
                    <input type="text" id="bosconnectNumber" name="bosconnectNumber" required>
                </div>
                <div class="form-group">
                    <label for="interventionDate">Date:</label>
                    <input type="date" id="interventionDate" name="interventionDate" required>
                </div>
                <div class="form-group">
                    <label>Type de test:</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testType" value="Test de routine" required>
                            <span>Test de routine</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testType" value="Test à la suite d’un problème signalé">
                            <span>Test à la suite d’un problème signalé</span>
                        </label>
                    </div>

                    <div class="certification-container">
                        <input type="checkbox" id="technicianCheck" required>
                        <label for="technicianCheck">
                            Je certifie être un technicien qualifié selon la charte Bosconnect
                        </label>
                    </div>

                </div>

                <button type="button" class="submit-btn" onclick="goToStep(2)" id="nextButton" disabled>Suivant</button>
            </div>

            <div id="step2" class="section">
                <h2>Guide pour la réalisation des tests</h2>
                <div class="form-group">
                    <section>
                        <p>
                            La carte Bosconnect est un dispositif domotique innovant conçu pour mesurer divers
                            paramètres environnementaux tels que la <span class="highlight">température</span>, l'<span
                                class="highlight">humidité</span>, la <span class="highlight">pression</span> et les
                            <span class="highlight">gaz</span>. De plus, elle intègre des relais pour gérer des
                            appareils de plus haute puissance, avec deux relais doubles, un variateur et un relais
                            simple, ce
                            dernier étant associé au système de contrôle d'accès par RFID.
                        </p>
                        <p>
                            Destinée à une installation dans un habitat, la carte peut être contrôlée de deux manières :
                            soit directement via un écran intégré, soit à distance via une interface web utilisant les
                            services Firebase.
                        </p>
                    </section>

                    <section>
                        <h2>Prérequis pour les tests</h2>
                        <p>Avant de commencer les tests, assurez-vous de disposer des outils et bibliothèques suivantes
                            :</p>

                        <table class="tools-table">
                            <thead>
                                <tr>
                                    <th>Outils nécessaires</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Chargeur 5V USB-C</td>
                                </tr>
                                <tr>
                                    <td>Multimètre (voltmètre, ampèremètre, ohmmètre)</td>
                                </tr>
                                <tr>
                                    <td>Oscilloscope numérique 2 voies</td>
                                </tr>
                                <tr>
                                    <td>Testeur de continuité</td>
                                </tr>
                                <tr>
                                    <td>Ordinateur avec un logiciel de programmation C tel que VSCode ou Arduino IDE
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </section>



                    <section class="instructions">
                        <h2>Procédure de test</h2>
                        <p>
                            Pour certains tests, vous devrez compiler le programme et le télécharger via le port USB-C
                            "CH340C" de la carte. Une fois le programme chargé, certains tests vous demanderont de taper
                            un code précis en majuscule dans le moniteur série.
                        </p>
                        <p>
                            Il est essentiel de commenter vos résultats à chaque étape du test. La fiche
                            d'intervention doit être détaillée, claire et compréhensible, afin de pouvoir facilement
                            identifier les éventuelles anomalies ou problèmes.
                        </p>
                        <div class="comment-guidelines">
                            <p>Pour chaque test, vos commentaires doivent inclure :</p>
                            <p>
                                <strong>Pourcentage d'erreur :</strong> Indiquez l'écart en pourcentage par rapport aux
                                valeurs
                                attendues pour les mesures effectuées. Par exemple : "Écart de 2.3% sur la mesure de
                                tension".
                            </p>
                            <p>
                                <strong>Description des anomalies :</strong> Détaillez précisément toute anomalie
                                constatée,
                                même mineure. Exemple : "Légère fluctuation de tension observée sur la broche 3".
                            </p>
                            <p>
                                <strong>Conditions de test :</strong> Notez les conditions environnementales lors des
                                tests
                                (température ambiante, humidité, luminosité) qui pourraient influencer les résultats.
                            </p>
                            <p>
                                <strong>Valeurs mesurées :</strong> Inscrivez les valeurs exactes mesurées et les
                                valeurs
                                attendues pour permettre un suivi précis.
                            </p>
                            <p>
                                <strong>Suggestions :</strong> Proposez des améliorations ou des actions de maintenance
                                préventive si nécessaire.
                            </p>
                        </div>

                        <h2>Documents</h2>
                        <p>
                            Dans le fichier compressé fourni ci-dessous, vous trouverez :
                        </p>
                        <table class="tools-table">
                            <thead>
                                <tr>
                                    <th>Fichiers et documents</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Le programme de test complet</td>
                                </tr>
                                <tr>
                                    <td>Le programme utilisateur</td>
                                </tr>
                                <tr>
                                    <td>La schématique de la carte Bosconnect</td>
                                </tr>
                                <tr>
                                    <td>Les datasheets des optocoupleurs, des relais, des transistors et du triac</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="download-container">
                            <button type="button" class="submit-btn download-btn" onclick="downloadFiles()">
                                Télécharger les fichiers (.zip)
                            </button>
                        </div>

                        <p>
                            Un espace de modification est prévu en tête du programme pour adapter vos tests selon vos
                            besoins. Veuillez ne pas modifier le reste du programme.
                        </p>

                        <section class="warning-section">
                            <div class="attention-panel">
                                <p>
                                    Les tests suivants sont généraux et ne peuvent pas couvrir toutes les erreurs
                                    possibles. Les espaces de commentaires sont là pour cela. N'hésitez pas à les
                                    détailler pour aider
                                    le service de réparation ou d'innovation de l'entreprise.
                                </p>
                            </div>
                        </section>

                    </section>

                    <section>
                        <h2>Finalisation des tests</h2>
                        <p>
                            Si aucune anomalie
                            n'est détectée, vous pouvez recompiler le programme utilisateur.
                            Dans le cas contraire, contactez le service de réparation
                            (service.reparation@bosconnect.fr).
                        </p>
                    </section>

                    <section class="warning-section">
                        <div class="attention-panel">
                            <p>
                                Attention : La carte ne doit être alimentée ni reprogrammée que si cela a été correctement demandé !
                            </p>
                        </div>
                    </section>

                    <div class="button-group">
                        <button type="button" class="submit-btn" onclick="goToStep(1)">Précédent</button>
                        <button type="button" class="submit-btn" onclick="goToStep(3)">Suivant</button>
                    </div>
                </div>
            </div>

            <div id="step3" class="section">
                <h2>Contrôles visuels</h2>
                <div class="test-item">
                    <label>Inspection visuelle : État général du PCB</label>
                    <p>Examinez attentivement la carte pour détecter toute anomalie visible : rayures, fissures, traces
                        d'usure, décoloration.
                        Vérifiez que le vernis de protection est intact et uniforme sur toute la surface. Assurez-vous
                        que les bords sont proprement usinés,
                        sans bavures ni irrégularités.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testVisual1" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testVisual1" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsVisual1" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Inspection visuelle : Composants et soudures</label>
                    <p>Vérifiez l'état et le positionnement de tous les composants. Recherchez des signes de surchauffe,
                        des composants mal alignés ou endommagés. Examinez la qualité des soudures : elles doivent être
                        brillantes,
                        bien formées, sans traces de résidus ou de soudures froides.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testVisual2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testVisual2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsVisual2" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Inspection visuelle : Connecteurs et points de connexion</label>
                    <p>Inspectez tous les connecteurs, borniers et points de connexion. Vérifiez leur alignement,
                        leur fixation et l'absence d'oxydation. Les broches doivent être droites et non corrodées.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testVisual3" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testVisual3" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsVisual3" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="button-group">
                    <button type="button" class="submit-btn" onclick="goToStep(2)">Précédent</button>
                    <button type="button" class="submit-btn" onclick="goToStep(4)">Suivant</button>
                </div>
            </div>

            <div id="step4" class="section">
                <h2>Tests de continuité</h2>
                <div class="form-group">
                    <div class="warning-section">
                        <div class="attention-panel">
                            <p>
                                Ces tests doivent être effectués HORS TENSION. Assurez-vous que la carte n'est pas
                                alimentée
                                avant de procéder aux mesures. Utilisez un multimètre en mode ohmmètre ou testeur de
                                continuité pour réaliser les tests suivants. Référez-vous au schéma de la carte et, si
                                besoin,
                                aux documentations techniques des composants pour
                                identifier les points de test. Attention, un test réalisé sur une mauvaise broche n'est
                                pas
                                valide !
                            </p>
                        </div>
                    </div>
                </div>
                <div class="test-item">
                    <label>Test de continuité : Vérification d'absence de court-circuit</label>
                    <p>Vérifiez l'isolation entre la masse (GND) et les lignes d'alimentation. Mesurez la résistance
                        entre GND et 5V, puis entre GND et 3.3V.
                        La résistance mesurée doit être supérieure à 100kΩ dans les deux cas. Une résistance plus faible
                        pourrait indiquer un court-circuit potentiel.
                        Effectuez les mesures sur plusieurs points de test pour confirmer l'isolation.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testContIsolation" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testContIsolation" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsContIsolation" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test de continuité : Connexion analogique</label>
                    <p>Vérifiez la continuité entre le pin analogique du capteur MQ9 et le GPIO correspondant (GPIO5),
                        ainsi que les pins ZVC et TRIAC du variateur et leurs correspondances sur l'ESP32 (ZVC : GPIO1 /
                        TRIAC : GPIO11). Une résistance peut être mesurée sur les lignes ZVC et TRIAC en raison des
                        tirages et de la résistance en série présents sur la ligne. Si nécessaire, consultez la
                        datasheet pour les pins correspondants des optocoupleurs.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testCont1" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testCont1" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsCont1" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test de continuité : Connexions des relais</label>
                    <p>Vérifiez la continuité entre les broches de commande des transistors de commande des relais et
                        les pins associés (Relais 1 : GPIO15 / Relais RFID : GPIO22 / Relais 2 : GPIO23). Référez-vous à
                        la documentation technique des
                        transistors si nécessaire. Pour simplifier ce test, il est recommandé de vérifier la continuité
                        sur la face arrière de la carte. Notez qu'une légère résistance de l'ordre de 0.3 ohm peut être
                        lue, ce qui est normal et dû à la résistance de pull down.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testCont2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testCont2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsCont2" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test de continuité : Bus I2C</label>
                    <p>Vérifiez la continuité des lignes SDA et SCL du bus I2C entre l'ESP32 et chaque capteur (BMP280,
                        BH1750). Placez une pointe de test sur la ligne correspondante de l'ESP32 (SDA : GPIO6 / SCL :
                        GPIO7) et l'autre pointe sur les connexions des capteurs.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testCont3" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testCont3" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsCont3" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test de continuité : Bus SPI</label>
                    <p>Vérifiez la continuité des lignes MOSI, MISO et SCK du bus SPI entre l'ESP32 et les composants
                        connectés (écran et lecteur RFID). Placez une pointe de test sur la ligne correspondante de
                        l'ESP32 (MISO : GPIO20 / MOSI : GPIO19 / SCK : GPIO21) et l'autre pointe sur les connexions des
                        composants.</p>
                    <p>Vérifiez également les trois pins d'activation des SPI Chip Select (TOUCH_CS : GPIO2 / RFID_CS :
                        GPIO4 / TFT_CS : GPIO18) et les pins correspondants sur l'écran et le lecteur RFID.</p>
                    </label>
                    <p></p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testCont4" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testCont4" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsCont4" rows="4" placeholder="Commentaires ..."></textarea>
                </div>

                <div class="button-group">
                    <button type="button" class="submit-btn" onclick="goToStep(3)">Précédent</button>
                    <button type="button" class="submit-btn" onclick="goToStep(5)">Suivant</button>
                </div>
            </div>


            <div id="step5" class="section">
                <div class="form-group">
                    <section class="warning-section">
                        <div class="attention-panel">
                            <p>
                                Si tous les tests précédents sont validés, vous pouvez alimenter la carte avec un
                                chargeur 5V approprié, soit via le port USB de la carte domotique, soit via celui de
                                l'ESP32.
                            </p>
                        </div>
                    </section>
                </div>

                <h2>Contrôles des mesures</h2>

                <div class="test-item">
                    <label>Test électrique : Vérification des masses (GND) et absence de court-circuit</label>
                    <p>Utilisez un multimètre pour vérifier qu'il n'y a pas de tension sur les broches « GND ».
                        La tension mesurée doit être strictement inférieure à 0.1V. Une tension supérieure pourrait
                        indiquer un problème de masse ou un court-circuit sur la carte.</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test2_1_1" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test2_1_1" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments2_1_1" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test électrique : Mesure des tensions d'alimentation 3.3V sur les composants</label>
                    <p>
                        Mesurez la tension sur les broches d'entrée des capteurs de pression, température, luminosité,
                        de
                        l'écran TFT et du lecteur RFID alimentées en 3.3V. Pour ce test, une tension nominale de 3.3V
                        est
                        attendue.
                        Une variation de ±15% est tolérée, ce qui signifie que la tension mesurée doit se situer entre
                        2.8V
                        et 3.8V.
                        Toute valeur en dehors de cette plage est considérée comme non conforme.
                    </p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test2_1_2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test2_1_2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments2_1_2" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test électrique : Mesure des tensions d'alimentation 5V sur les composants</label>
                    <p>
                        Mesurez la tension sur la broche du capteur de gaz MQ9 alimentée en 5V. Pour ce test, une
                        tension
                        nominale
                        de 5V est attendue. Une variation de ±15% est tolérée, ce qui signifie que la tension mesurée
                        doit
                        se situer
                        entre 4.25V et 5.75V. Toute valeur en dehors de cette plage est considérée comme non conforme.
                    </p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test2_1_3" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test2_1_3" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments2_1_3" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test fonctionnel : Vérification des voyants LED et rétroéclairage</label>
                    <p>Les témoins lumineux du lecteur RFID, du capteur MQ9 et du rétroéclairage de l'écran sont-ils
                        opérationnels et allumés ?</p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test2_2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test2_2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments2_2" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>
                <div class="button-group">
                    <button type="button" class="submit-btn" onclick="goToStep(4)">Précédent</button>
                    <button type="button" class="submit-btn" onclick="goToStep(6)">Suivant</button>
                </div>
            </div>

            <div id="step6" class="section">

                <div class="form-group">
                    <div class="warning-section">
                        <div class="attention-panel">
                            <p>
                                Si tous les tests précédents sont corrects, vous pouvez passer à la programmation de la
                                carte. Utilisez un environnement Arduino pour compiler le programme sur le port USB-C
                                "CH340C" de la carte.
                            </p>
                        </div>
                    </div>
                </div>

                <h2>Contrôle des capteurs</h2>

                <div class="test-item">
                    <label>Test capteur : Fonctionnement et calibration du capteur de gaz MQ9</label>
                    <p>
                        Pour tester le capteur de gaz MQ9, vérifiez la cohérence des valeurs affichées dans le moniteur
                        série. Dans un environnement normal, les valeurs varient généralement entre 1000 et 1500 ppm.
                        Pour realiser le test saississez "MQ9" dans le moniteur série.
                    </p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test3_1" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test3_1" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments3_1" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test capteur : Mesures température et pression BMP280</label>
                    <p>
                        Pour tester le capteur BMP280, utilisez le moniteur série après avoir saisi "BMP280" pour
                        afficher les valeurs et vérifiez
                        leur cohérence. Vous pouvez les comparer avec les données météorologiques locales. La
                        température
                        doit être comprise dans une plage de ±5°C par rapport à la température ambiante mesurée. Pour la
                        pression atmosphérique, une variation de ±10 hPa est acceptable par rapport aux données météo
                        locales.
                    </p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test3_2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test3_2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments3_2" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test capteur : Réponse et précision du capteur de luminosité BH1750</label>
                    <p>
                        Pour tester le capteur BH1750, vérifiez la cohérence des valeurs sur le moniteur série après
                        avoir saisi "BH1750". Vous
                        pouvez faire varier la luminosité avec une lampe ou un téléphone. Testez trois conditions :
                        obscurité
                        (< 10 lux), lumière ambiante (100-500 lux), et forte luminosité (> 1000 lux). Le capteur doit
                            réagir dans un délai inférieur à 1 seconde à chaque changement d'éclairage. Vérifiez aussi
                            la
                            linéarité
                            des mesures en augmentant progressivement la luminosité.
                    </p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test3_3" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test3_3" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments3_3" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="button-group">
                    <button type="button" class="submit-btn" onclick="goToStep(5)">Précédent</button>
                    <button type="button" class="submit-btn" onclick="goToStep(7)">Suivant</button>
                </div>
            </div>

            <div id="step7" class="section">
                <h2>Contrôle des actionneurs</h2>
                <div class="test-item">
                    <label>Test actionneur : Commutation et continuité du relais double n°1</label>
                    <p>
                        Pour tester le relais double de l'appareil 1, saisissez "RELAIS1" dans le moniteur série.
                        Ensuite, mesurez la continuité entre les bornes à vis : PHASE_AP1 et
                        NEUTRE_AP1.
                    </p>

                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test4_1" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test4_1" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments4_1" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test actionneur : Commutation et continuité du relais double n°2</label>
                    <p>
                        Pour tester le relais double de l'appareil 2, saisissez "RELAIS2" dans le moniteur série.
                        Ensuite, mesurez la continuité sur les bornes à vis : PHASE_AP2 et
                        NEUTRE_AP2.
                    </p>

                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test4_2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test4_2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments4_2" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>
                <div class="test-item">
                    <label>Test actionneur : Fonctionnement du relais de contrôle d'accès RFID</label>
                    <p>
                        Pour tester le relais simple associé au fonctionnement du RFID, saisissez "RELAISRFID" dans le
                        moniteur série. Ensuite, mesurez la continuité sur le bornier RELAIS_RFID.
                    </p>

                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test4_3" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test4_3" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments4_3" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>

                </div>

                <div class="test-item">
                    <label>Test actionneur : Vérification du variateur de puissance et signal de sortie</label>
                    <p>
                        Pour réaliser ce test, commencez par connecter un GBF (Générateur de Basse Fréquence) à l’entrée
                        du
                        bornier à vis VARIATEUR_IN. Ensuite, reliez une sonde à un oscilloscope et connectez-la à la
                        sortie
                        du bornier VARIATEUR_OUT. Configurez l’oscilloscope de manière à afficher simultanément les
                        signaux
                        d’entrée et de sortie.
                    </p>

                    <p>
                        Lancez ensuite le programme en utilisant la commande "VARIATEUR" sur le terminal série. Vous
                        devriez constater que l’onde sinusoïdale de sortie est modulée en fonction des paramètres du
                        variateur, ce qui
                        reflète les changements effectués par ce dernier. Vérifiez que cette modulation est cohérente et
                        conforme aux attentes et aux informations du moniteur série.
                    </p>

                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test4_4" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test4_4" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments4_4" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>
                <div class="button-group">
                    <button type="button" class="submit-btn" onclick="goToStep(6)">Précédent</button>
                    <button type="button" class="submit-btn" onclick="goToStep(8)">Suivant</button>
                </div>
            </div>


            <div id="step8" class="section">
                <h2>Contrôle des indicateurs</h2>
                <div class="test-item">
                    <label>Test interface : Calibration et réponse de l'écran TFT tactile</label>
                    <p>
                        Pour tester l'écran tactile, utilisez le stylet fourni et saisissez "TACTILE" dans le moniteur
                        série. Suivez ensuite les indications de calibrage affichées à l'écran. Assurez-vous que chaque
                        zone de l'écran réagit correctement au toucher et qu'il n'y a pas de zones mortes. Vérifiez
                        également
                        l'absence de pixels défectueux ou manquants. Notez toute irrégularité ou problème de sensibilité
                        dans vos commentaires.
                    </p>

                    <p>
                        Ensuite, saisissez "ECRAN" dans le moniteur série pour tester les couleurs de l'écran. L'écran
                        doit afficher une séquence de couleurs pour vérifier la fidélité
                        des couleurs et l'uniformité de l'affichage. Comparez les couleurs affichées avec celles
                        attendues. Assurez-vous que les couleurs sont uniformes et qu'il n'y a
                        pas de zones plus sombres ou plus claires.
                    </p>
                    <div class="warning-section">
                        <div class="attention-panel">
                            <p>
                                Si l'écran ne répond pas, vous pouvez mettre hors tension la carte et tester la
                                continuité des 14 pins de l'écran avec un multimètre. Notez les pins qui ne sont pas
                                connectés correctement. (Référez-vous au schéma structurel pour identifier les
                                connexions).
                            </p>
                        </div>
                    </div>



                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test5_1" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test5_1" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments5_1" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test interface : Séquence de couleurs LED RGB de statut</label>
                    <p>
                        Pour tester la LED RGB, saisissez "RGB" dans le moniteur série. La LED doit effectuer une séquence de 7 couleurs (rouge, vert, bleu, jaune, cyan, magenta, blanc) avec un changement toutes les secondes. Vérifiez que chaque couleur est pure et distincte, sans scintillement ni variation d'intensité. Les couleurs affichées doivent correspondre exactement à celles indiquées dans le moniteur série. Portez une attention particulière à la transition entre les couleurs et à l'uniformité de la luminosité.
                    </p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test5_2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test5_2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments5_2" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>
                <div class="button-group">
                    <button type="button" class="submit-btn" onclick="goToStep(7)">Précédent</button>
                    <button type="button" class="submit-btn" onclick="goToStep(9)">Suivant</button>
                </div>
            </div>

            <div id="step9" class="section">
                <h2>Contrôle de la connectivité</h2>
                <div class="test-item">
                    <label>Test RFID : Lecture de l'UID de la carte</label>
                    <p>
                        Pour tester le lecteur RFID, placez différentes cartes RFID sur le lecteur et tapez "RFID" dans
                        le terminal série pour lire les UID. Notez la rapidité de lecture et vérifiez que chaque UID est
                        correctement affiché dans le moniteur série. Assurez-vous que le lecteur détecte chaque carte
                        rapidement et sans erreur. Si une carte n'est pas lue correctement, essayez de la repositionner
                        et de la scanner à nouveau.
                    </p>

                    <div class="warning-section">
                        <div class="attention-panel">
                            <p>
                                Si le lecteur RFID ne répond pas, vous pouvez mettre hors tension la carte et tester
                                la
                                continuité des connexions du lecteur RFID avec un multimètre. Notez les connexions
                                qui ne sont pas
                                correctement connectées. (Référez-vous au schéma structurel pour identifier les
                                connexions).
                            </p>
                        </div>
                    </div>

                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="testRFID" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="testRFID" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="commentsRFID" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test connectivité : Configuration et connexion au réseau Wi-Fi</label>
                    <p>
                        Dans le code C++ fourni, modifiez le SSID du wifi et le mot de passe, puis téléversez le code.
                        Dans le moniteur série, saisissez "WIFI" pour vérifier la connexion. Suivez les étapes sur le
                        moniteur série pour vérifier la connexion. La connexion est-elle bien établie ?
                    </p>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test6_1" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test6_1" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments6_1" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <label>Test connectivité : Communication bidirectionnelle avec Firebase</label>
                    <p>
                        Si la carte est correctement connectée au Wi-Fi, après avoir saisi "FIREBASE" dans le terminal
                        série, vous pourrez contrôler la LED de l'ESP32 et lire les données du capteur de luminosité
                        depuis la page de contrôle ci-dessous. Les données sont-elles transmises correctement ?
                    </p>
                    <p>
                        Vous pouvez modifier l'entête du programme pour spécifier un autre appareil à contrôler et capteur à lire.
                    </p>
                    <div class="sensor-control">
                        <div class="button-group">
                            <button type="button" class="submit-btn on-btn" onclick="turnOnDevice()">ON</button>
                            <button type="button" class="submit-btn off-btn" onclick="turnOffDevice()">OFF</button>
                        </div>
                        <p id="sensorValueDisplay">Valeur actuelle du capteur : <span id="sensorValue">N/A</span> Lux
                        </p>
                    </div>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="test6_2" value="OK" required>
                            OK
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="test6_2" value="NOK">
                            NOK
                        </label>
                    </div>
                    <textarea name="comments6_2" rows="4" style="width: 100%;"
                        placeholder="Commentaires ..."></textarea>
                </div>

                <div class="test-item">
                    <h4>Commentaires généraux de l'intervention</h4>
                    <p>Utilisez cette zone pour ajouter des observations générales, des recommandations ou des notes
                        importantes concernant l'intervention.</p>
                    <textarea name="finalComments" id="finalComments" rows="6" style="width: 100%;"
                        placeholder="Commentaires généraux sur l'intervention..."></textarea>

                    <div class="certification-container">
                        <input type="checkbox" id="testsCompleted" required>
                        <label for="technicianCheck">
                            Je certifie que tous les tests ont été correctement réalisés.
                        </label>
                    </div>
                </div>


                <div class="button-group">
                    <button type="button" class="submit-btn" onclick="goToStep(8)">Précédent</button>
                    <button type="button" id="exportPdf" class="submit-btn" disabled>Exporter en PDF</button>
                </div>
            </div>
        </form>
    </div>

    <footer>
        <div class="footer-container">
            <p>&copy; 2024 BOSCONNECT. Tous droits réservés.</p>
            <p>
                <a href="#privacy-policy">Politique de confidentialité</a> |
                <a href="#terms">Conditions d'utilisation</a>
            </p>
        </div>
    </footer>
</body>

</html>